
> backend@1.0.0 start /Users/styletheory/Documents/Project-Web/test cursor/vehicle-booking-system/backend
> node server.js

[dotenv@17.2.2] injecting env (9) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.2] injecting env (0) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }
Executing (default): SELECT 1+1 AS result
Database connection established successfully.
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'users'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_role' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'users' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'vehicles'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_vehicles_type' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_vehicles_fuel_type' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_vehicles_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'vehicles' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drivers'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_drivers_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drivers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'bookings'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_bookings_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'bookings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'approvals'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_approvals_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'approvals' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'fuel_logs'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'fuel_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'service_logs'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_service_logs_service_type' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'service_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'audit_logs'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'audit_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Database models synchronized.
Server is running on port 5001
Environment: development
API Documentation available at http://localhost:5001/api/health
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:12 +0000] "GET /api/auth/verify-token HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:12 +0000] "GET /api/auth/verify-token HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '113';
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '113';
::1 - - [08/Sep/2025:06:28:12 +0000] "GET /api/bookings/113 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '113' ORDER BY "AuditLog"."created_at" DESC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '113';
::1 - - [08/Sep/2025:06:28:12 +0000] "GET /api/bookings/113/activities HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '113';
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '113' ORDER BY "AuditLog"."created_at" DESC;
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
::1 - - [08/Sep/2025:06:28:12 +0000] "GET /api/bookings/113/activities HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:28:12 +0000] "GET /api/bookings/113 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l1' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'employee' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."status" = 'available' ORDER BY "Vehicle"."plate_number" ASC;
Executing (default): SELECT "id", "name", "license_number", "license_expiry", "phone", "email", "status", "experience_years", "vehicle_types", "created_at", "updated_at" FROM "drivers" AS "Driver" WHERE "Driver"."status" = 'available' ORDER BY "Driver"."name" ASC;
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/users?role=employee HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/vehicles?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/users?role=approver_l1 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/drivers?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'employee' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/users?role=employee HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."status" = 'available' ORDER BY "Vehicle"."plate_number" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l1' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/vehicles?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/users?role=approver_l1 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "license_number", "license_expiry", "phone", "email", "status", "experience_years", "vehicle_types", "created_at", "updated_at" FROM "drivers" AS "Driver" WHERE "Driver"."status" = 'available' ORDER BY "Driver"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/drivers?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l2' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/users?role=approver_l2 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l2' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:39 +0000] "GET /api/users?role=approver_l2 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" = 1;
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE ("Booking"."start_date" BETWEEN '2025-09-29 06:28:00.000 +00:00' AND '2025-09-30 06:28:00.000 +00:00' OR "Booking"."end_date" BETWEEN '2025-09-29 06:28:00.000 +00:00' AND '2025-09-30 06:28:00.000 +00:00' OR ("Booking"."start_date" <= '2025-09-29 06:28:00.000 +00:00' AND "Booking"."end_date" >= '2025-09-30 06:28:00.000 +00:00')) AND "Booking"."vehicle_id" = 1 AND "Booking"."status" IN ('approved', 'in_progress') LIMIT 1;
Executing (default): INSERT INTO "bookings" ("id","user_id","created_by","vehicle_id","driver_id","start_date","end_date","status","department","notes","created_at","updated_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING "id","user_id","created_by","vehicle_id","driver_id","start_date","end_date","start_mileage","end_mileage","status","department","notes","rejection_reason","created_at","updated_at";
Executing (default): INSERT INTO "approvals" ("id","booking_id","approver_id","level","status","created_at","updated_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6) RETURNING "id","booking_id","approver_id","level","status","comments","approved_at","created_at","updated_at";
Executing (default): INSERT INTO "approvals" ("id","booking_id","approver_id","level","status","created_at","updated_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6) RETURNING "id","booking_id","approver_id","level","status","comments","approved_at","created_at","updated_at";
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = 114;
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
::1 - - [08/Sep/2025:06:28:52 +0000] "POST /api/bookings HTTP/1.1" 201 1130 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking";
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" ORDER BY "Vehicle"."plate_number" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/vehicles HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id";
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "Booking".*, "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."status" AS "vehicle.status", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."status" AS "driver.status", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM (SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at" FROM "bookings" AS "Booking" ORDER BY "Booking"."created_at" DESC LIMIT 10 OFFSET 0) AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" ORDER BY "Booking"."created_at" DESC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/bookings?page=1&limit=10 HTTP/1.1" 200 12150 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" ORDER BY "Vehicle"."plate_number" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/vehicles HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking";
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id";
Executing (default): SELECT "Booking".*, "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."status" AS "vehicle.status", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."status" AS "driver.status", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM (SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at" FROM "bookings" AS "Booking" ORDER BY "Booking"."created_at" DESC LIMIT 10 OFFSET 0) AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" ORDER BY "Booking"."created_at" DESC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/bookings?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:28:54 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '114';
Executing (default): UPDATE "bookings" SET "status"=$1,"rejection_reason"=$2,"updated_at"=$3 WHERE "id" = $4
Executing (default): SELECT "id", "booking_id", "approver_id", "level", "status", "comments", "approved_at", "created_at", "updated_at" FROM "approvals" AS "Approval" WHERE "Approval"."booking_id" = 114 AND "Approval"."status" = 'pending';
Executing (default): UPDATE "approvals" SET "status"=$1,"comments"=$2,"updated_at"=$3 WHERE "booking_id" = $4 AND "status" = $5
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
::1 - - [08/Sep/2025:06:28:58 +0000] "PATCH /api/bookings/114/cancel HTTP/1.1" 200 395 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking";
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id";
Executing (default): SELECT "Booking".*, "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."status" AS "vehicle.status", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."status" AS "driver.status", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM (SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at" FROM "bookings" AS "Booking" ORDER BY "Booking"."created_at" DESC LIMIT 10 OFFSET 0) AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" ORDER BY "Booking"."created_at" DESC;
::1 - - [08/Sep/2025:06:28:58 +0000] "GET /api/bookings?page=1&limit=10 HTTP/1.1" 200 12190 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '114';
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '114';
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '114' ORDER BY "AuditLog"."created_at" DESC;
::1 - - [08/Sep/2025:06:28:59 +0000] "GET /api/bookings/114 HTTP/1.1" 200 1803 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:59 +0000] "GET /api/bookings/114/activities HTTP/1.1" 200 984 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '114';
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:28:59 +0000] "GET /api/bookings/114 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '114';
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '114' ORDER BY "AuditLog"."created_at" DESC;
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
::1 - - [08/Sep/2025:06:28:59 +0000] "GET /api/bookings/114/activities HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."status" = 'available' ORDER BY "Vehicle"."plate_number" ASC;
Executing (default): SELECT "id", "name", "license_number", "license_expiry", "phone", "email", "status", "experience_years", "vehicle_types", "created_at", "updated_at" FROM "drivers" AS "Driver" WHERE "Driver"."status" = 'available' ORDER BY "Driver"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l1' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'employee' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:10 +0000] "GET /api/vehicles?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:10 +0000] "GET /api/users?role=employee HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:10 +0000] "GET /api/drivers?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:10 +0000] "GET /api/users?role=approver_l1 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."status" = 'available' ORDER BY "Vehicle"."plate_number" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'employee' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:10 +0000] "GET /api/vehicles?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "license_number", "license_expiry", "phone", "email", "status", "experience_years", "vehicle_types", "created_at", "updated_at" FROM "drivers" AS "Driver" WHERE "Driver"."status" = 'available' ORDER BY "Driver"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l1' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:11 +0000] "GET /api/drivers?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:11 +0000] "GET /api/users?role=employee HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:11 +0000] "GET /api/users?role=approver_l1 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l2' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:11 +0000] "GET /api/users?role=approver_l2 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l2' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:11 +0000] "GET /api/users?role=approver_l2 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" = 1;
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE ("Booking"."start_date" BETWEEN '2025-09-29 06:29:00.000 +00:00' AND '2025-09-30 06:29:00.000 +00:00' OR "Booking"."end_date" BETWEEN '2025-09-29 06:29:00.000 +00:00' AND '2025-09-30 06:29:00.000 +00:00' OR ("Booking"."start_date" <= '2025-09-29 06:29:00.000 +00:00' AND "Booking"."end_date" >= '2025-09-30 06:29:00.000 +00:00')) AND "Booking"."vehicle_id" = 1 AND "Booking"."status" IN ('approved', 'in_progress') LIMIT 1;
Executing (default): INSERT INTO "bookings" ("id","user_id","created_by","vehicle_id","driver_id","start_date","end_date","status","department","notes","created_at","updated_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING "id","user_id","created_by","vehicle_id","driver_id","start_date","end_date","start_mileage","end_mileage","status","department","notes","rejection_reason","created_at","updated_at";
Executing (default): INSERT INTO "approvals" ("id","booking_id","approver_id","level","status","created_at","updated_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6) RETURNING "id","booking_id","approver_id","level","status","comments","approved_at","created_at","updated_at";
Executing (default): INSERT INTO "approvals" ("id","booking_id","approver_id","level","status","created_at","updated_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6) RETURNING "id","booking_id","approver_id","level","status","comments","approved_at","created_at","updated_at";
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = 115;
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
::1 - - [08/Sep/2025:06:29:22 +0000] "POST /api/bookings HTTP/1.1" 201 1130 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking";
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" ORDER BY "Vehicle"."plate_number" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/vehicles HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id";
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "Booking".*, "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."status" AS "vehicle.status", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."status" AS "driver.status", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM (SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at" FROM "bookings" AS "Booking" ORDER BY "Booking"."created_at" DESC LIMIT 10 OFFSET 0) AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" ORDER BY "Booking"."created_at" DESC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" ORDER BY "Vehicle"."plate_number" ASC;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/bookings?page=1&limit=10 HTTP/1.1" 200 12179 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/vehicles HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking";
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
Executing (default): SELECT count(DISTINCT("Booking"."id")) AS "count" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id";
Executing (default): SELECT "Booking".*, "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."status" AS "vehicle.status", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."status" AS "driver.status", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM (SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at" FROM "bookings" AS "Booking" ORDER BY "Booking"."created_at" DESC LIMIT 10 OFFSET 0) AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" ORDER BY "Booking"."created_at" DESC;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/bookings?page=1&limit=10 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:24 +0000] "GET /api/users HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '115';
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '115';
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '115' ORDER BY "AuditLog"."created_at" DESC;
::1 - - [08/Sep/2025:06:29:26 +0000] "GET /api/bookings/115 HTTP/1.1" 200 1715 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:29:26 +0000] "GET /api/bookings/115/activities HTTP/1.1" 200 339 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '115';
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:29:26 +0000] "GET /api/bookings/115 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '115';
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '115' ORDER BY "AuditLog"."created_at" DESC;
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
::1 - - [08/Sep/2025:06:29:26 +0000] "GET /api/bookings/115/activities HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '115';
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."status" = 'available' ORDER BY "Vehicle"."plate_number" ASC;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/vehicles?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/bookings/115 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "plate_number", "type", "make", "model", "year", "capacity", "fuel_type", "status", "last_service_date", "next_service_date", "mileage", "location", "created_at", "updated_at" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."status" = 'available' ORDER BY "Vehicle"."plate_number" ASC;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/vehicles?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '115';
Executing (default): SELECT "id", "name", "license_number", "license_expiry", "phone", "email", "status", "experience_years", "vehicle_types", "created_at", "updated_at" FROM "drivers" AS "Driver" WHERE "Driver"."status" = 'available' ORDER BY "Driver"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/drivers?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/bookings/115 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l1' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'employee' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/users?role=approver_l1 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/users?role=employee HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "license_number", "license_expiry", "phone", "email", "status", "experience_years", "vehicle_types", "created_at", "updated_at" FROM "drivers" AS "Driver" WHERE "Driver"."status" = 'available' ORDER BY "Driver"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/drivers?status=available HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l1' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'employee' ORDER BY "User"."name" ASC;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/users?role=employee HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/users?role=approver_l1 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l2' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/users?role=approver_l2 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."role" = 'approver_l2' ORDER BY "User"."name" ASC;
::1 - - [08/Sep/2025:06:29:27 +0000] "GET /api/users?role=approver_l2 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '115';
Executing (default): UPDATE "bookings" SET "driver_id"=$1,"start_date"=$2,"end_date"=$3,"updated_at"=$4 WHERE "id" = $5
Executing (default): INSERT INTO "audit_logs" ("id","user_id","action","entity_type","entity_id","old_values","new_values","description","created_at") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8) RETURNING "id","user_id","action","entity_type","entity_id","old_values","new_values","ip_address","user_agent","description","created_at";
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" WHERE "Booking"."id" = 115;
::1 - - [08/Sep/2025:06:29:30 +0000] "PUT /api/bookings/115 HTTP/1.1" 200 1148 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '115';
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '115';
::1 - - [08/Sep/2025:06:29:32 +0000] "GET /api/bookings/115 HTTP/1.1" 200 1763 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '115' ORDER BY "AuditLog"."created_at" DESC;
Executing (default): SELECT "Booking"."id", "Booking"."user_id", "Booking"."created_by", "Booking"."vehicle_id", "Booking"."driver_id", "Booking"."start_date", "Booking"."end_date", "Booking"."start_mileage", "Booking"."end_mileage", "Booking"."status", "Booking"."department", "Booking"."notes", "Booking"."rejection_reason", "Booking"."created_at", "Booking"."updated_at", "vehicle"."id" AS "vehicle.id", "vehicle"."plate_number" AS "vehicle.plate_number", "vehicle"."type" AS "vehicle.type", "vehicle"."make" AS "vehicle.make", "vehicle"."model" AS "vehicle.model", "vehicle"."year" AS "vehicle.year", "vehicle"."capacity" AS "vehicle.capacity", "vehicle"."fuel_type" AS "vehicle.fuel_type", "vehicle"."status" AS "vehicle.status", "vehicle"."last_service_date" AS "vehicle.last_service_date", "vehicle"."next_service_date" AS "vehicle.next_service_date", "vehicle"."mileage" AS "vehicle.mileage", "vehicle"."location" AS "vehicle.location", "vehicle"."created_at" AS "vehicle.created_at", "vehicle"."updated_at" AS "vehicle.updated_at", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."license_number" AS "driver.license_number", "driver"."license_expiry" AS "driver.license_expiry", "driver"."phone" AS "driver.phone", "driver"."email" AS "driver.email", "driver"."status" AS "driver.status", "driver"."experience_years" AS "driver.experience_years", "driver"."vehicle_types" AS "driver.vehicle_types", "driver"."created_at" AS "driver.created_at", "driver"."updated_at" AS "driver.updated_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."department" AS "user.department", "createdBy"."id" AS "createdBy.id", "createdBy"."name" AS "createdBy.name", "createdBy"."email" AS "createdBy.email", "createdBy"."department" AS "createdBy.department", "approvals"."id" AS "approvals.id", "approvals"."booking_id" AS "approvals.booking_id", "approvals"."approver_id" AS "approvals.approver_id", "approvals"."level" AS "approvals.level", "approvals"."status" AS "approvals.status", "approvals"."comments" AS "approvals.comments", "approvals"."approved_at" AS "approvals.approved_at", "approvals"."created_at" AS "approvals.created_at", "approvals"."updated_at" AS "approvals.updated_at", "approvals->approver"."id" AS "approvals.approver.id", "approvals->approver"."name" AS "approvals.approver.name", "approvals->approver"."email" AS "approvals.approver.email" FROM "bookings" AS "Booking" LEFT OUTER JOIN "vehicles" AS "vehicle" ON "Booking"."vehicle_id" = "vehicle"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Booking"."driver_id" = "driver"."id" LEFT OUTER JOIN "users" AS "user" ON "Booking"."user_id" = "user"."id" LEFT OUTER JOIN "users" AS "createdBy" ON "Booking"."created_by" = "createdBy"."id" LEFT OUTER JOIN "approvals" AS "approvals" ON "Booking"."id" = "approvals"."booking_id" LEFT OUTER JOIN "users" AS "approvals->approver" ON "approvals"."approver_id" = "approvals->approver"."id" WHERE "Booking"."id" = '115';
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
Executing (default): SELECT "id", "name", "license_number" FROM "drivers" AS "Driver" WHERE "Driver"."id" IN (5, 1);
::1 - - [08/Sep/2025:06:29:32 +0000] "GET /api/bookings/115 HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
::1 - - [08/Sep/2025:06:29:32 +0000] "GET /api/bookings/115/activities HTTP/1.1" 200 871 "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 2;
Executing (default): SELECT "id", "user_id", "created_by", "vehicle_id", "driver_id", "start_date", "end_date", "start_mileage", "end_mileage", "status", "department", "notes", "rejection_reason", "created_at", "updated_at" FROM "bookings" AS "Booking" WHERE "Booking"."id" = '115';
Executing (default): SELECT "AuditLog"."id", "AuditLog"."user_id", "AuditLog"."action", "AuditLog"."entity_type", "AuditLog"."entity_id", "AuditLog"."old_values", "AuditLog"."new_values", "AuditLog"."ip_address", "AuditLog"."user_agent", "AuditLog"."description", "AuditLog"."created_at", "user"."id" AS "user.id", "user"."name" AS "user.name", "user"."email" AS "user.email", "user"."role" AS "user.role" FROM "audit_logs" AS "AuditLog" LEFT OUTER JOIN "users" AS "user" ON "AuditLog"."user_id" = "user"."id" WHERE "AuditLog"."entity_type" = 'booking' AND "AuditLog"."entity_id" = '115' ORDER BY "AuditLog"."created_at" DESC;
Executing (default): SELECT "id", "plate_number", "make", "model" FROM "vehicles" AS "Vehicle" WHERE "Vehicle"."id" IN (1);
Executing (default): SELECT "id", "name", "license_number" FROM "drivers" AS "Driver" WHERE "Driver"."id" IN (5, 1);
::1 - - [08/Sep/2025:06:29:32 +0000] "GET /api/bookings/115/activities HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
