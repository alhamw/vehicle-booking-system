[dotenv@17.2.2] injecting env (8) from .env -- tip: ðŸ“¡ auto-backup env with Radar: https://dotenvx.com/radar
[dotenv@17.2.2] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
Executing (default): SELECT 1+1 AS result
Database connection established successfully.
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'users'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_role' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'users' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'vehicles'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_vehicles_type' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_vehicles_fuel_type' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_vehicles_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'vehicles' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drivers'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_drivers_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drivers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'bookings'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_bookings_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'bookings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'approvals'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_approvals_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'approvals' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'fuel_logs'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'fuel_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'service_logs'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_service_logs_service_type' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'service_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'audit_logs'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'audit_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Database models synchronized.
Server is running on port 5001
Environment: development
API Documentation available at http://localhost:5001/api/health
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
::1 - - [03/Sep/2025:17:02:39 +0000] "GET /api/auth/verify-token HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
::1 - - [03/Sep/2025:17:02:39 +0000] "GET /api/auth/verify-token HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
Executing (default): SELECT count("Approval"."id") AS "count" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id";
Executing (default): SELECT "Approval"."id", "Approval"."booking_id", "Approval"."approver_id", "Approval"."level", "Approval"."status", "Approval"."comments", "Approval"."approved_at", "Approval"."created_at", "Approval"."updated_at", "approver"."id" AS "approver.id", "approver"."name" AS "approver.name", "approver"."email" AS "approver.email", "booking"."id" AS "booking.id", "booking"."user_id" AS "booking.user_id", "booking"."vehicle_id" AS "booking.vehicle_id", "booking"."driver_id" AS "booking.driver_id", "booking"."start_date" AS "booking.start_date", "booking"."end_date" AS "booking.end_date", "booking"."start_mileage" AS "booking.start_mileage", "booking"."end_mileage" AS "booking.end_mileage", "booking"."status" AS "booking.status", "booking"."department" AS "booking.department", "booking"."notes" AS "booking.notes", "booking"."rejection_reason" AS "booking.rejection_reason", "booking"."created_at" AS "booking.created_at", "booking"."updated_at" AS "booking.updated_at", "booking->user"."id" AS "booking.user.id", "booking->user"."name" AS "booking.user.name", "booking->user"."email" AS "booking.user.email", "booking->user"."department" AS "booking.user.department", "booking->vehicle"."id" AS "booking.vehicle.id", "booking->vehicle"."plate_number" AS "booking.vehicle.plate_number", "booking->vehicle"."type" AS "booking.vehicle.type", "booking->vehicle"."make" AS "booking.vehicle.make", "booking->vehicle"."model" AS "booking.vehicle.model" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id" ORDER BY "Approval"."created_at" DESC LIMIT 10 OFFSET 0;
::1 - - [03/Sep/2025:17:02:39 +0000] "GET /api/approvals?page=1&limit=10&show_all=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
Executing (default): SELECT count("Approval"."id") AS "count" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id";
Executing (default): SELECT "Approval"."id", "Approval"."booking_id", "Approval"."approver_id", "Approval"."level", "Approval"."status", "Approval"."comments", "Approval"."approved_at", "Approval"."created_at", "Approval"."updated_at", "approver"."id" AS "approver.id", "approver"."name" AS "approver.name", "approver"."email" AS "approver.email", "booking"."id" AS "booking.id", "booking"."user_id" AS "booking.user_id", "booking"."vehicle_id" AS "booking.vehicle_id", "booking"."driver_id" AS "booking.driver_id", "booking"."start_date" AS "booking.start_date", "booking"."end_date" AS "booking.end_date", "booking"."start_mileage" AS "booking.start_mileage", "booking"."end_mileage" AS "booking.end_mileage", "booking"."status" AS "booking.status", "booking"."department" AS "booking.department", "booking"."notes" AS "booking.notes", "booking"."rejection_reason" AS "booking.rejection_reason", "booking"."created_at" AS "booking.created_at", "booking"."updated_at" AS "booking.updated_at", "booking->user"."id" AS "booking.user.id", "booking->user"."name" AS "booking.user.name", "booking->user"."email" AS "booking.user.email", "booking->user"."department" AS "booking.user.department", "booking->vehicle"."id" AS "booking.vehicle.id", "booking->vehicle"."plate_number" AS "booking.vehicle.plate_number", "booking->vehicle"."type" AS "booking.vehicle.type", "booking->vehicle"."make" AS "booking.vehicle.make", "booking->vehicle"."model" AS "booking.vehicle.model" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id" ORDER BY "Approval"."created_at" DESC LIMIT 10 OFFSET 0;
::1 - - [03/Sep/2025:17:02:39 +0000] "GET /api/approvals?page=1&limit=10&show_all=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
::1 - - [03/Sep/2025:17:02:48 +0000] "GET /api/auth/verify-token HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
::1 - - [03/Sep/2025:17:02:48 +0000] "GET /api/auth/verify-token HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
Executing (default): SELECT count("Approval"."id") AS "count" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id";
Executing (default): SELECT "Approval"."id", "Approval"."booking_id", "Approval"."approver_id", "Approval"."level", "Approval"."status", "Approval"."comments", "Approval"."approved_at", "Approval"."created_at", "Approval"."updated_at", "approver"."id" AS "approver.id", "approver"."name" AS "approver.name", "approver"."email" AS "approver.email", "booking"."id" AS "booking.id", "booking"."user_id" AS "booking.user_id", "booking"."vehicle_id" AS "booking.vehicle_id", "booking"."driver_id" AS "booking.driver_id", "booking"."start_date" AS "booking.start_date", "booking"."end_date" AS "booking.end_date", "booking"."start_mileage" AS "booking.start_mileage", "booking"."end_mileage" AS "booking.end_mileage", "booking"."status" AS "booking.status", "booking"."department" AS "booking.department", "booking"."notes" AS "booking.notes", "booking"."rejection_reason" AS "booking.rejection_reason", "booking"."created_at" AS "booking.created_at", "booking"."updated_at" AS "booking.updated_at", "booking->user"."id" AS "booking.user.id", "booking->user"."name" AS "booking.user.name", "booking->user"."email" AS "booking.user.email", "booking->user"."department" AS "booking.user.department", "booking->vehicle"."id" AS "booking.vehicle.id", "booking->vehicle"."plate_number" AS "booking.vehicle.plate_number", "booking->vehicle"."type" AS "booking.vehicle.type", "booking->vehicle"."make" AS "booking.vehicle.make", "booking->vehicle"."model" AS "booking.vehicle.model" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id" ORDER BY "Approval"."created_at" DESC LIMIT 10 OFFSET 0;
::1 - - [03/Sep/2025:17:02:48 +0000] "GET /api/approvals?page=1&limit=10&show_all=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
Executing (default): SELECT count("Approval"."id") AS "count" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id";
Executing (default): SELECT "Approval"."id", "Approval"."booking_id", "Approval"."approver_id", "Approval"."level", "Approval"."status", "Approval"."comments", "Approval"."approved_at", "Approval"."created_at", "Approval"."updated_at", "approver"."id" AS "approver.id", "approver"."name" AS "approver.name", "approver"."email" AS "approver.email", "booking"."id" AS "booking.id", "booking"."user_id" AS "booking.user_id", "booking"."vehicle_id" AS "booking.vehicle_id", "booking"."driver_id" AS "booking.driver_id", "booking"."start_date" AS "booking.start_date", "booking"."end_date" AS "booking.end_date", "booking"."start_mileage" AS "booking.start_mileage", "booking"."end_mileage" AS "booking.end_mileage", "booking"."status" AS "booking.status", "booking"."department" AS "booking.department", "booking"."notes" AS "booking.notes", "booking"."rejection_reason" AS "booking.rejection_reason", "booking"."created_at" AS "booking.created_at", "booking"."updated_at" AS "booking.updated_at", "booking->user"."id" AS "booking.user.id", "booking->user"."name" AS "booking.user.name", "booking->user"."email" AS "booking.user.email", "booking->user"."department" AS "booking.user.department", "booking->vehicle"."id" AS "booking.vehicle.id", "booking->vehicle"."plate_number" AS "booking.vehicle.plate_number", "booking->vehicle"."type" AS "booking.vehicle.type", "booking->vehicle"."make" AS "booking.vehicle.make", "booking->vehicle"."model" AS "booking.vehicle.model" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id" ORDER BY "Approval"."created_at" DESC LIMIT 10 OFFSET 0;
::1 - - [03/Sep/2025:17:02:48 +0000] "GET /api/approvals?page=1&limit=10&show_all=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
Executing (default): SELECT "id", "name", "email", "role", "department", "status", "created_at", "updated_at" FROM "users" AS "User" WHERE "User"."id" = 1;
Executing (default): SELECT count("Approval"."id") AS "count" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id";
Executing (default): SELECT "Approval"."id", "Approval"."booking_id", "Approval"."approver_id", "Approval"."level", "Approval"."status", "Approval"."comments", "Approval"."approved_at", "Approval"."created_at", "Approval"."updated_at", "approver"."id" AS "approver.id", "approver"."name" AS "approver.name", "approver"."email" AS "approver.email", "booking"."id" AS "booking.id", "booking"."user_id" AS "booking.user_id", "booking"."vehicle_id" AS "booking.vehicle_id", "booking"."driver_id" AS "booking.driver_id", "booking"."start_date" AS "booking.start_date", "booking"."end_date" AS "booking.end_date", "booking"."start_mileage" AS "booking.start_mileage", "booking"."end_mileage" AS "booking.end_mileage", "booking"."status" AS "booking.status", "booking"."department" AS "booking.department", "booking"."notes" AS "booking.notes", "booking"."rejection_reason" AS "booking.rejection_reason", "booking"."created_at" AS "booking.created_at", "booking"."updated_at" AS "booking.updated_at", "booking->user"."id" AS "booking.user.id", "booking->user"."name" AS "booking.user.name", "booking->user"."email" AS "booking.user.email", "booking->user"."department" AS "booking.user.department", "booking->vehicle"."id" AS "booking.vehicle.id", "booking->vehicle"."plate_number" AS "booking.vehicle.plate_number", "booking->vehicle"."type" AS "booking.vehicle.type", "booking->vehicle"."make" AS "booking.vehicle.make", "booking->vehicle"."model" AS "booking.vehicle.model" FROM "approvals" AS "Approval" LEFT OUTER JOIN "users" AS "approver" ON "Approval"."approver_id" = "approver"."id" LEFT OUTER JOIN "bookings" AS "booking" ON "Approval"."booking_id" = "booking"."id" LEFT OUTER JOIN "users" AS "booking->user" ON "booking"."user_id" = "booking->user"."id" LEFT OUTER JOIN "vehicles" AS "booking->vehicle" ON "booking"."vehicle_id" = "booking->vehicle"."id" ORDER BY "Approval"."created_at" DESC LIMIT 25 OFFSET 0;
::1 - - [03/Sep/2025:17:02:51 +0000] "GET /api/approvals?page=1&limit=25&show_all=true HTTP/1.1" 304 - "http://localhost:3000/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
